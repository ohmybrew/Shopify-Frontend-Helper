!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).SFA=t()}}(function(){return function i(u,s,c){function a(e,t){if(!s[e]){if(!u[e]){var n="function"==typeof require&&require;if(!t&&n)return n(e,!0);if(d)return d(e,!0);var r=new Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}var o=s[e]={exports:{}};u[e][0].call(o.exports,function(t){return a(u[e][1][t]||t)},o,o.exports,i,u,s,c)}return s[e].exports}for(var d="function"==typeof require&&require,t=0;t<c.length;t++)a(c[t]);return a}({1:[function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),u=this&&this.__awaiter||function(i,u,s,c){return new(s||(s=Promise))(function(t,e){function n(t){try{o(c.next(t))}catch(t){e(t)}}function r(t){try{o(c.throw(t))}catch(t){e(t)}}function o(e){e.done?t(e.value):new s(function(t){t(e.value)}).then(n,r)}o((c=c.apply(i,u||[])).next())})},l=this&&this.__generator||function(n,r){var o,i,u,t,s={label:0,sent:function(){if(1&u[0])throw u[1];return u[1]},trys:[],ops:[]};return t={next:e(0),throw:e(1),return:e(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(o)throw new TypeError("Generator is already executing.");for(;s;)try{if(o=1,i&&(u=2&e[0]?i.return:e[0]?i.throw||((u=i.return)&&u.call(i),0):i.next)&&!(u=u.call(i,e[1])).done)return u;switch(i=0,u&&(e=[2&e[0],u.value]),e[0]){case 0:case 1:u=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,i=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(u=0<(u=s.trys).length&&u[u.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!u||e[1]>u[0]&&e[1]<u[3])){s.label=e[1];break}if(6===e[0]&&s.label<u[1]){s.label=u[1],u=e;break}if(u&&s.label<u[2]){s.label=u[2],s.ops.push(e);break}u[2]&&s.ops.pop(),s.trys.pop();continue}e=r.call(n,s)}catch(t){e=[6,t],i=0}finally{o=u=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}},o=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),u=[];try{for(;(void 0===e||0<e--)&&!(r=i.next()).done;)u.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return u},h=this&&this.__spread||function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(o(arguments[e]));return t};function s(t){return t.constructor===String?JSON.parse(t):t}Object.defineProperty(n,"__esModule",{value:!0});var c=function(){function c(){}return c.request=function(t){var e=t.method,o=void 0===e?"GET":e,i=t.endpoint,u=t.data,n=t.type,s=void 0===n?"json":n;return new Promise(function(t,e){var n=new XMLHttpRequest,r=i;"GET"===o&&(r+="?"+Math.random().toString(36).substr(2,10)),n.open(o,""+c.baseURI+r,!0),"json"===(n.responseType=s)&&n.setRequestHeader("Content-Type","application/json;charset=UTF-8"),n.onload=function(){200===n.status?t(n):e(n)},n.send(u?JSON.stringify(u):null)})},c.baseURI=window.location.protocol+"//"+window.location.hostname,c}(),a=function(t){function f(){return null!==t&&t.apply(this,arguments)||this}return i(f,t),f.checkout=function(){return u(this,void 0,void 0,function(){return l(this,function(t){switch(t.label){case 0:return[4,f.request({endpoint:"/checkout",type:"text"})];case 1:return[2,t.sent().responseText]}})})},f.applyDiscount=function(e){return u(this,void 0,void 0,function(){return l(this,function(t){return[2,f.request({method:"HEAD",endpoint:"/discount/"+e})]})})},f.verifyDiscount=function(d){return u(this,void 0,void 0,function(){var e,n,r,o,i,u,s,c,a;return l(this,function(t){switch(t.label){case 0:return[4,f.checkout()];case 1:if(e=t.sent(),n=new DOMParser,r=n.parseFromString(e,"text/html"),o=function(t,e){return void 0===e&&(e=r),e.querySelector(t)},i=function(t,e){return void 0===e&&(e=r),e.querySelectorAll(t)},-1<e.indexOf("data-discount-success"))u=o("[data-discount-success] .reduction-code__text").innerHTML.trim(),s=parseFloat(o("[data-checkout-discount-amount-target]").dataset.checkoutDiscountAmountTarget),c=o("[data-discount-type]").dataset.discountType;else{if(!(-1<e.indexOf('id="checkout_clear_discount"')))return[2,!1];u=o('[data-reduction-form="true"] .reduction-code .reduction-code__text').innerHTML.match(/([a-z0-9_-]+)\s?/i)[1].trim(),s=h(i(".order-summary .reduction-code .reduction-code__text")).reduce(function(t,e){var n=e.innerHTML.match(/\(\-\$([0-9.,]+)\)/);return n&&-1<e.innerHTML.indexOf(u)?parseFloat(n[1].replace(/[^0-9]+/g,""))+t:0+t},0),c="unknown"}return a={code:u,type:c,discount:s},void 0!==d?[2,a.code.toUpperCase()===d.toUpperCase()&&a]:[2,a]}})})},f}(c);n.Checkout=a;var d=function(t){function o(){return null!==t&&t.apply(this,arguments)||this}return i(o,t),o.get=function(r){return void 0===r&&(r=!1),u(this,void 0,void 0,function(){var e,n;return l(this,function(t){switch(t.label){case 0:if(r&&o.data)return[2,o.data];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,o.request({endpoint:"/cart.js"})];case 2:return e=t.sent(),[2,o.data=s(e.response)];case 3:return[2,{response:(n=t.sent()).response,status:n.status}];case 4:return[2]}})})},o.add=function(n){return u(this,void 0,void 0,function(){var e;return l(this,function(t){switch(t.label){case 0:return n.constructor===Array?(e=[],n.forEach(function(t){e.push(function(){return o.request({method:"POST",endpoint:"/cart/add.js",data:t})})}),e.push(function(){return o.get()}),[2,e.reduce(function(t,e){return t.then(e)},Promise.resolve())]):[4,o.request({data:n,method:"POST",endpoint:"/cart/add.js"})];case 1:return t.sent(),[2,o.get()]}})})},o.update=function(e,n){return u(this,void 0,void 0,function(){return l(this,function(t){switch(t.label){case 0:return[4,o.request({method:"POST",endpoint:"/cart/update.js",data:{updates:e,note:n}})];case 1:return[2,s(t.sent().response)]}})})},o.attributes=function(e,n){return u(this,void 0,void 0,function(){return l(this,function(t){switch(t.label){case 0:return[4,o.request({method:"POST",endpoint:"/cart/update.js",data:{attributes:e,note:n}})];case 1:return[2,s(t.sent().response)]}})})},o.note=function(e){return u(this,void 0,void 0,function(){return l(this,function(t){switch(t.label){case 0:return[4,o.request({method:"POST",endpoint:"/cart/update.js",data:{note:e}})];case 1:return[2,s(t.sent().response)]}})})},o.change=function(e){return u(this,void 0,void 0,function(){return l(this,function(t){switch(t.label){case 0:return[4,o.request({data:e,method:"POST",endpoint:"/cart/change.js"})];case 1:return[2,s(t.sent().response)]}})})},o.remove=function(n){return u(this,void 0,void 0,function(){var e;return l(this,function(t){return(e={})[n]=0,[2,o.update(e)]})})},o.removeByLine=function(e){return u(this,void 0,void 0,function(){return l(this,function(t){return[2,o.change({line:e,quantity:0})]})})},o.clear=function(){return u(this,void 0,void 0,function(){return l(this,function(t){return[2,o.request({method:"POST",endpoint:"/cart/clear.js"})]})})},o}(c);n.Cart=d;var f=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.get=function(e){return u(this,void 0,void 0,function(){return l(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,this.request({endpoint:"/products/"+e+".json"})];case 1:return[2,s(t.sent().response).product];case 2:return t.sent(),[2,void 0];case 3:return[2]}})})},e}(c);n.Product=f;var p=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.get=function(e){return u(this,void 0,void 0,function(){return l(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,this.request({endpoint:"/collections/"+e+".json"})];case 1:return[2,s(t.sent().response).collection];case 2:return t.sent(),[2,void 0];case 3:return[2]}})})},e.getProducts=function(e){return u(this,void 0,void 0,function(){return l(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,this.request({endpoint:"/collections/"+e+"/products.json"})];case 1:return[2,s(t.sent().response).products];case 2:return t.sent(),[2,void 0];case 3:return[2]}})})},e}(c);n.Collection=p},{}]},{},[1])(1)});